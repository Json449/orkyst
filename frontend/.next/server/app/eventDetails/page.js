(()=>{var e={};e.id=357,e.ids=[357],e.modules={10846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},19121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},29294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},63033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},33873:e=>{"use strict";e.exports=require("path")},79551:e=>{"use strict";e.exports=require("url")},32560:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>a.a,__next_app__:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c});var n=r(70260),o=r(28203),s=r(25155),a=r.n(s),i=r(67292),l={};for(let e in i)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(l[e]=()=>i[e]);r.d(t,l);let c=["",{children:["eventDetails",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,75190)),"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/eventDetails/page.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,54481)),"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/eventDetails/layout.tsx"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(r.bind(r,71354)),"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.bind(r,50042)),"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/not-found.tsx"],forbidden:[()=>Promise.resolve().then(r.t.bind(r,69116,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(r.t.bind(r,41485,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(r.bind(r,70440))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}],d=["/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/eventDetails/page.tsx"],u={require:r,loadChunk:()=>Promise.resolve()},p=new n.AppPageRouteModule({definition:{kind:o.RouteKind.APP_PAGE,page:"/eventDetails/page",pathname:"/eventDetails",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},64178:(e,t,r)=>{Promise.resolve().then(r.bind(r,75190))},11034:(e,t,r)=>{Promise.resolve().then(r.bind(r,20545))},20545:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>Q});var n=r(45512),o=r(58009),s=r(79334),a=r(76388),i=r(64445);let l=(0,i.A)((0,n.jsx)("path",{d:"M5 20h14v-2H5zm0-10h4v6h6v-6h4l-7-7z"}),"Upload"),c=(0,i.A)((0,n.jsx)("path",{d:"m19 9 1.25-2.75L23 5l-2.75-1.25L19 1l-1.25 2.75L15 5l2.75 1.25zm-7.5.5L9 4 6.5 9.5 1 12l5.5 2.5L9 20l2.5-5.5L17 12zM19 15l-1.25 2.75L15 19l2.75 1.25L19 23l1.25-2.75L23 19l-2.75-1.25z"}),"AutoAwesome"),d=(0,i.A)((0,n.jsx)("path",{d:"M17.65 6.35C16.2 4.9 14.21 4 12 4c-4.42 0-7.99 3.58-7.99 8s3.57 8 7.99 8c3.73 0 6.84-2.55 7.73-6h-2.08c-.82 2.33-3.04 4-5.65 4-3.31 0-6-2.69-6-6s2.69-6 6-6c1.66 0 3.14.69 4.22 1.78L13 11h7V4z"}),"Refresh"),u=(0,i.A)((0,n.jsx)("path",{d:"m6 2 .01 6L10 12l-3.99 4.01L6 22h12v-6l-4-4 4-3.99V2zm10 14.5V20H8v-3.5l4-4z"}),"HourglassTop"),p=(0,i.A)((0,n.jsx)("path",{d:"M19.35 10.04C18.67 6.59 15.64 4 12 4 9.11 4 6.6 5.64 5.35 8.04 2.34 8.36 0 10.91 0 14c0 3.31 2.69 6 6 6h13c2.76 0 5-2.24 5-5 0-2.64-2.05-4.78-4.65-4.96M14 13v4h-4v-4H7l5-5 5 5z"}),"CloudUpload"),h=(0,i.A)((0,n.jsx)("path",{d:"M21 19V5c0-1.1-.9-2-2-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2M8.5 13.5l2.5 3.01L14.5 12l4.5 6H5z"}),"Image");var f=r(45103);let m=({setImageUrl:e,generateImageLoading:t,imageUrl:r,onGenerateAI:s,onCloudinaryUpload:a})=>{let[i,m]=(0,o.useState)("upload");console.log("sss",r);let[x,g]=(0,o.useState)(""),[v,b]=(0,o.useState)(!1),y=(0,o.useRef)(null),j=(0,o.useRef)(null),w=e=>{e.preventDefault(),e.stopPropagation(),"dragenter"===e.type||"dragover"===e.type?b(!0):"dragleave"===e.type&&b(!1)},N=async t=>{let r=t.target.files?.[0];if(r)try{let t=URL.createObjectURL(r);e(t)}catch(e){console.error("Error uploading image:",e)}},k=async()=>{s&&x.trim()&&s(x)};return(0,o.useEffect)(()=>{"generate"===i&&j.current&&j.current.focus()},[i]),(0,n.jsxs)("div",{className:"mx-auto bg-white rounded-xl shadow-2xl overflow-hidden",children:[(0,n.jsxs)("div",{className:"flex border-b border-gray-200 bg-gradient-to-r from-gray-50 to-gray-100",children:[(0,n.jsxs)("button",{className:`flex-1 py-2 px-4 font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-2 ${"upload"===i?"text-blue-600 border-b-2 border-blue-600 bg-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>m("upload"),children:[(0,n.jsx)(l,{fontSize:"medium"}),"Upload Image"]}),(0,n.jsxs)("button",{className:`flex-1 py-2 px-4 font-semibold text-lg transition-all duration-300 flex items-center justify-center gap-2 ${"generate"===i?"text-purple-600 border-b-2 border-purple-600 bg-white shadow-sm":"text-gray-500 hover:text-gray-700"}`,onClick:()=>m("generate"),children:[(0,n.jsx)(c,{fontSize:"medium"}),"AI Generate"]})]}),(0,n.jsx)("div",{className:"bg-gradient-to-br from-gray-50 to-white",children:"upload"===i?(0,n.jsx)(n.Fragment,{children:r?(0,n.jsxs)("div",{className:"relative group rounded-xl overflow-hidden shadow-lg",children:[(0,n.jsx)(f.default,{src:r,alt:"Uploaded",width:800,height:500,className:"w-full h-[44vh] object-cover transition-transform duration-500 group-hover:scale-105"}),(0,n.jsx)("div",{className:"absolute inset-0 bg-gradient-to-t from-black/60 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300 flex items-end p-6",children:(0,n.jsxs)("button",{onClick:a,className:"bg-white/90 text-gray-800 px-6 py-3 rounded-full font-medium hover:bg-white transition-all transform translate-y-4 group-hover:translate-y-0 shadow-lg flex items-center gap-2",children:[(0,n.jsx)(d,{fontSize:"small"}),"Change Image"]})})]}):(0,n.jsxs)("div",{className:`h-[44vh] rounded-xl border-2 ${v?"border-blue-400 bg-blue-50":"border-dashed border-gray-300"} flex justify-center items-center flex-col cursor-pointer transition-all duration-300 relative overflow-hidden`,onClick:()=>y.current?.click(),onDragEnter:w,onDragLeave:w,onDragOver:w,onDrop:e=>{e.preventDefault(),e.stopPropagation(),b(!1),e.dataTransfer.files&&e.dataTransfer.files[0]&&N({target:{files:e.dataTransfer.files}})},children:[t?(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(u,{className:"animate-spin text-blue-500",style:{fontSize:"4rem"}}),(0,n.jsx)("p",{className:"text-gray-600 font-medium mt-4",children:"Processing your image..."}),(0,n.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:"This won't take long"})]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:"relative mb-6",children:[(0,n.jsx)("div",{className:"w-24 h-24 bg-blue-100 rounded-2xl flex items-center justify-center",children:(0,n.jsx)(p,{className:"text-3xl text-blue-500"})}),(0,n.jsx)("div",{className:"absolute -right-2 -top-2 bg-blue-500 text-white rounded-full w-8 h-8 flex items-center justify-center shadow-md",children:(0,n.jsx)(h,{className:"text-sm"})})]}),(0,n.jsx)("h3",{className:"text-xl font-semibold text-gray-700 mb-2",children:v?"Drop your image here":"Drag & drop your image"}),(0,n.jsx)("p",{className:"text-gray-500 mb-6",children:"or click to browse files"}),(0,n.jsxs)("button",{className:"px-8 py-3 bg-gradient-to-r from-blue-500 to-blue-600 text-white rounded-full font-medium hover:shadow-lg transition-all flex items-center gap-2",children:[(0,n.jsx)(l,{fontSize:"small"}),"Select File"]}),(0,n.jsx)("div",{className:"absolute bottom-4 text-xs text-gray-400",children:"Supports JPG, PNG, WEBP (Max 10MB)"})]}),(0,n.jsx)("input",{ref:y,type:"file",onChange:N,className:"hidden",accept:"image/*"})]})}):(0,n.jsxs)("div",{className:"space-y-6",children:[(0,n.jsx)("div",{className:"flex gap-3",children:(0,n.jsxs)("div",{className:"flex-1 relative",children:[(0,n.jsx)("input",{ref:j,type:"text",value:x,onChange:e=>g(e.target.value),placeholder:"Describe the image you want to create...",className:"w-full px-6 py-4 border-0 rounded-xl bg-gray-100 focus:ring-2 focus:ring-purple-500 focus:bg-white text-gray-700 placeholder-gray-400 pr-24 shadow-inner transition-all duration-300",onKeyDown:e=>"Enter"===e.key&&k()}),(0,n.jsx)("button",{onClick:k,disabled:t||!x.trim(),className:`absolute right-2 top-2 px-5 py-2 rounded-lg font-medium text-white flex items-center gap-2 transition-all ${t||!x.trim()?"bg-gray-400 cursor-not-allowed":"bg-gradient-to-r from-purple-500 to-pink-500 hover:shadow-lg"}`,children:t?(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(u,{className:"animate-spin",fontSize:"small"}),"Creating..."]}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(c,{fontSize:"small"}),"Generate"]})})]})}),(0,n.jsx)("div",{className:"relative group rounded-xl overflow-hidden shadow-lg bg-gradient-to-br from-gray-100 to-gray-50 h-[29vh] flex items-center justify-center",children:(0,n.jsxs)("div",{className:"text-center p-8",children:[(0,n.jsx)("div",{className:"mx-auto w-28 h-28 bg-gradient-to-r from-purple-100 to-pink-100 rounded-full flex items-center justify-center mb-6",children:(0,n.jsx)(c,{className:"text-4xl text-purple-500"})}),(0,n.jsx)("h3",{className:"text-2xl font-bold text-gray-700 mb-3",children:"Unleash Your Creativity"}),(0,n.jsx)("p",{className:"text-gray-500 max-w-md mx-auto mb-6",children:t?"Our AI is crafting your masterpiece...":"Describe what you envision and we&apos;ll generate it for you"}),t&&(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)(u,{className:"animate-spin text-purple-500",style:{fontSize:"3rem"}}),(0,n.jsx)("p",{className:"text-sm text-gray-400 mt-3",children:"This usually takes 10-30 seconds"})]})]})}),!t&&!r&&(0,n.jsx)("div",{className:"grid grid-cols-3 gap-3 mt-4",children:["Cyberpunk cityscape","Surreal forest landscape","Portrait of a futuristic samurai"].map(e=>(0,n.jsxs)("button",{onClick:()=>{g(e),setTimeout(()=>j.current?.focus(),0)},className:"text-xs bg-gray-100 hover:bg-gray-200 text-gray-700 px-3 py-2 rounded-lg transition-colors truncate",children:['"',e,'"']},e))})]})})]})};var x=r(9953),g=r(7481);let v=({children:e})=>(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"flex flex-col items-center",children:[(0,n.jsx)("div",{className:"h-12 w-12 animate-spin rounded-full border-4 border-white border-t-transparent"}),e&&(0,n.jsx)("p",{className:"mt-4 text-white text-lg font-medium",children:e})]})}),b=({isOpen:e,currentVersion:t,onSave:r,onCancel:s})=>{let[a,i]=(0,o.useState)(""),[l,c]=(0,o.useState)("current");return e?(0,n.jsx)("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-50",children:(0,n.jsxs)("div",{className:"bg-white p-6 rounded-lg w-96",children:[(0,n.jsx)("h3",{className:"text-black text-xl font-bold mb-4",children:"Save Changes"}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsxs)("p",{className:"mb-2 text-black",children:["Current Version: v",t]}),(0,n.jsxs)("div",{className:"flex items-center mb-2",children:[(0,n.jsx)("input",{type:"radio",id:"currentVersion",checked:"current"===l,onChange:()=>c("current"),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"currentVersion",className:"text-gray-600",children:"Update current version"})]}),(0,n.jsxs)("div",{className:"flex items-center",children:[(0,n.jsx)("input",{type:"radio",id:"newVersion",checked:"new"===l,onChange:()=>c("new"),className:"mr-2"}),(0,n.jsx)("label",{htmlFor:"newVersion",className:"text-gray-600",children:"Create new version"})]})]}),(0,n.jsxs)("div",{className:"mb-4",children:[(0,n.jsx)("label",{htmlFor:"comment",className:"text-gray-600 block mb-2",children:"Version Comment (Optional):"}),(0,n.jsx)("textarea",{id:"comment",value:a,onChange:e=>i(e.target.value),className:"w-full p-2 border rounded text-gray-600",rows:3})]}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:s,className:"px-4 py-2 bg-gray-400 rounded",children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>r(l,a),className:"px-4 py-2 bg-blue-500 text-white rounded",children:"Save"})]})]})}):null};var y=r(64186),j=r(30191);let w=()=>{let e=(0,y.jE)();return(0,j.n)({mutationFn:async e=>{let t=`/api/events/details?id=${e}`,r=await fetch(t,{method:"GET"}),n=await r.json();if(!r.ok)throw Error(n.message||"Failed to fetch AI tips");return n},onSuccess:t=>{console.log("dataassss",t),e.setQueryData(["events",t],t)},onError:e=>{console.log("Error fetching AI tips:",e?.message)}})};var N=r(28200),k=function(){return(k=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},C={onActivate:N.func,onAddUndo:N.func,onBeforeAddUndo:N.func,onBeforeExecCommand:N.func,onBeforeGetContent:N.func,onBeforeRenderUI:N.func,onBeforeSetContent:N.func,onBeforePaste:N.func,onBlur:N.func,onChange:N.func,onClearUndos:N.func,onClick:N.func,onContextMenu:N.func,onCommentChange:N.func,onCompositionEnd:N.func,onCompositionStart:N.func,onCompositionUpdate:N.func,onCopy:N.func,onCut:N.func,onDblclick:N.func,onDeactivate:N.func,onDirty:N.func,onDrag:N.func,onDragDrop:N.func,onDragEnd:N.func,onDragGesture:N.func,onDragOver:N.func,onDrop:N.func,onExecCommand:N.func,onFocus:N.func,onFocusIn:N.func,onFocusOut:N.func,onGetContent:N.func,onHide:N.func,onInit:N.func,onInput:N.func,onKeyDown:N.func,onKeyPress:N.func,onKeyUp:N.func,onLoadContent:N.func,onMouseDown:N.func,onMouseEnter:N.func,onMouseLeave:N.func,onMouseMove:N.func,onMouseOut:N.func,onMouseOver:N.func,onMouseUp:N.func,onNodeChange:N.func,onObjectResizeStart:N.func,onObjectResized:N.func,onObjectSelected:N.func,onPaste:N.func,onPostProcess:N.func,onPostRender:N.func,onPreProcess:N.func,onProgressState:N.func,onRedo:N.func,onRemove:N.func,onReset:N.func,onSaveContent:N.func,onSelectionChange:N.func,onSetAttrib:N.func,onSetContent:N.func,onShow:N.func,onSubmit:N.func,onUndo:N.func,onVisualAid:N.func,onSkinLoadError:N.func,onThemeLoadError:N.func,onModelLoadError:N.func,onPluginLoadError:N.func,onIconsLoadError:N.func,onLanguageLoadError:N.func,onScriptsLoad:N.func,onScriptsLoadError:N.func},S=k({apiKey:N.string,licenseKey:N.string,id:N.string,inline:N.bool,init:N.object,initialValue:N.string,onEditorChange:N.func,value:N.string,tagName:N.string,tabIndex:N.number,cloudChannel:N.string,plugins:N.oneOfType([N.string,N.array]),toolbar:N.oneOfType([N.string,N.array]),disabled:N.bool,textareaName:N.string,tinymceScriptSrc:N.oneOfType([N.string,N.arrayOf(N.string),N.arrayOf(N.shape({src:N.string,async:N.bool,defer:N.bool}))]),rollback:N.oneOfType([N.number,N.oneOf([!1])]),scriptLoading:N.shape({async:N.bool,defer:N.bool,delay:N.number})},C),E=function(e){return"function"==typeof e},I=function(e){return e in C},L=function(e){return e.substr(2)},z=function(e,t,r,n,o,s,a){var i=Object.keys(o).filter(I),l=Object.keys(s).filter(I),c=i.filter(function(e){return void 0===s[e]}),d=l.filter(function(e){return void 0===o[e]});c.forEach(function(e){var t=L(e),n=a[t];r(t,n),delete a[t]}),d.forEach(function(r){var o=n(e,r),s=L(r);a[s]=o,t(s,o)})},P=0,D=function(e){var t=Date.now();return e+"_"+Math.floor(1e9*Math.random())+ ++P+String(t)},B=function(e){return null!==e&&("textarea"===e.tagName.toLowerCase()||"input"===e.tagName.toLowerCase())},M=function(e){return void 0===e||""===e?[]:Array.isArray(e)?e:e.split(" ")},R=function(e){if(!("isConnected"in Node.prototype)){for(var t=e,r=e.parentNode;null!=r;)r=(t=r).parentNode;return t===e.ownerDocument}return e.isConnected},A=function(e,t){void 0!==e&&(null!=e.mode&&"object"==typeof e.mode&&"function"==typeof e.mode.set?e.mode.set(t):e.setMode(t))},O=function(){return(O=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},T=function(e,t,r){var n,o,s=e.createElement("script");s.referrerPolicy="origin",s.type="application/javascript",s.id=t.id,s.src=t.src,s.async=null!==(n=t.async)&&void 0!==n&&n,s.defer=null!==(o=t.defer)&&void 0!==o&&o;var a=function(){s.removeEventListener("load",a),s.removeEventListener("error",i),r(t.src)},i=function(e){s.removeEventListener("load",a),s.removeEventListener("error",i),r(t.src,e)};s.addEventListener("load",a),s.addEventListener("error",i),e.head&&e.head.appendChild(s)},U=function(e){var t={},r=function(e,r){var n=t[e];n.done=!0,n.error=r;for(var o=0,s=n.handlers;o<s.length;o++)(0,s[o])(e,r);n.handlers=[]};return{loadScripts:function(n,o,s){var a=function(e){return void 0!==s?s(e):console.error(e)};if(0===n.length){a(Error("At least one script must be provided"));return}for(var i=0,l=!1,c=function(e,t){l||(t?(l=!0,a(t)):++i===n.length&&o())},d=0;d<n.length;d++){var u=n[d],p=t[u.src];if(p)p.done?c(u.src,p.error):p.handlers.push(c);else{var h=D("tiny-");t[u.src]={id:h,src:u.src,done:!1,error:null,handlers:[c]},T(e,O({id:h},u),r)}}},deleteScripts:function(){for(var r,n=0,o=Object.values(t);n<o.length;n++){var s=o[n],a=e.getElementById(s.id);null!=a&&"SCRIPT"===a.tagName&&(null===(r=a.parentNode)||void 0===r||r.removeChild(a))}t={}},getDocument:function(){return e}}},V=function(){var e=[],t=function(t){var r=e.find(function(e){return e.getDocument()===t});return void 0===r&&(r=U(t),e.push(r)),r};return{loadList:function(e,r,n,o,s){var a=function(){return t(e).loadScripts(r,o,s)};n>0?setTimeout(a,n):a()},reinitialize:function(){for(var t=e.pop();null!=t;t=e.pop())t.deleteScripts()}}}(),_=function(e){return e&&e.tinymce?e.tinymce:null},H=function(){var e=function(t,r){return(e=Object.setPrototypeOf||({__proto__:[]})instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])})(t,r)};return function(t,r){if("function"!=typeof r&&null!==r)throw TypeError("Class extends value "+String(r)+" is not a constructor or null");function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}(),F=function(){return(F=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)},G="change keyup compositionend setcontent CommentChange",W=function(e){function t(t){var r,n,s,a=e.call(this,t)||this;return a.rollbackTimer=void 0,a.valueCursor=void 0,a.rollbackChange=function(){var e=a.editor,t=a.props.value;e&&t&&t!==a.currentContent&&e.undoManager.ignore(function(){if(e.setContent(t),a.valueCursor&&(!a.inline||e.hasFocus()))try{e.selection.moveToBookmark(a.valueCursor)}catch(e){}}),a.rollbackTimer=void 0},a.handleBeforeInput=function(e){if(void 0!==a.props.value&&a.props.value===a.currentContent&&a.editor&&(!a.inline||a.editor.hasFocus()))try{a.valueCursor=a.editor.selection.getBookmark(3)}catch(e){}},a.handleBeforeInputSpecial=function(e){("Enter"===e.key||"Backspace"===e.key||"Delete"===e.key)&&a.handleBeforeInput(e)},a.handleEditorChange=function(e){var t=a.editor;if(t&&t.initialized){var r=t.getContent();void 0===a.props.value||a.props.value===r||!1===a.props.rollback||a.rollbackTimer||(a.rollbackTimer=window.setTimeout(a.rollbackChange,"number"==typeof a.props.rollback?a.props.rollback:200)),r!==a.currentContent&&(a.currentContent=r,E(a.props.onEditorChange)&&a.props.onEditorChange(r,t))}},a.handleEditorChangeSpecial=function(e){("Backspace"===e.key||"Delete"===e.key)&&a.handleEditorChange(e)},a.initialise=function(e){void 0===e&&(e=0);var t,r,n,o,s,i=a.elementRef.current;if(i){if(!R(i)){if(0===e)setTimeout(function(){return a.initialise(1)},1);else if(e<100)setTimeout(function(){return a.initialise(e+1)},100);else throw Error("tinymce can only be initialised when in a document");return}var l=_(a.view);if(!l)throw Error("tinymce should have been loaded into global scope");var c=F(F(F(F({},a.props.init),{selector:void 0,target:i,readonly:a.props.disabled,inline:a.inline,plugins:(t=null===(n=a.props.init)||void 0===n?void 0:n.plugins,r=a.props.plugins,M(t).concat(M(r))),toolbar:null!==(o=a.props.toolbar)&&void 0!==o?o:null===(s=a.props.init)||void 0===s?void 0:s.toolbar}),a.props.licenseKey?{license_key:a.props.licenseKey}:{}),{setup:function(e){a.editor=e,a.bindHandlers({}),a.inline&&!B(i)&&e.once("PostRender",function(t){e.setContent(a.getInitialValue(),{no_events:!0})}),a.props.init&&E(a.props.init.setup)&&a.props.init.setup(e)},init_instance_callback:function(e){var t,r,n=a.getInitialValue();a.currentContent=null!==(t=a.currentContent)&&void 0!==t?t:e.getContent(),a.currentContent!==n&&(a.currentContent=n,e.setContent(n),e.undoManager.clear(),e.undoManager.add(),e.setDirty(!1));var o=null!==(r=a.props.disabled)&&void 0!==r&&r;A(a.editor,o?"readonly":"design"),a.props.init&&E(a.props.init.init_instance_callback)&&a.props.init.init_instance_callback(e)}});a.inline||(i.style.visibility=""),B(i)&&(i.value=a.getInitialValue()),l.init(c)}},a.id=a.props.id||D("tiny-react"),a.elementRef=o.createRef(),a.inline=null!==(s=null!==(r=a.props.inline)&&void 0!==r?r:null===(n=a.props.init)||void 0===n?void 0:n.inline)&&void 0!==s&&s,a.boundHandlers={},a}return H(t,e),Object.defineProperty(t.prototype,"view",{get:function(){var e,t;return null!==(t=null===(e=this.elementRef.current)||void 0===e?void 0:e.ownerDocument.defaultView)&&void 0!==t?t:window},enumerable:!1,configurable:!0}),t.prototype.componentDidUpdate=function(e){var t,r,n=this;if(this.rollbackTimer&&(clearTimeout(this.rollbackTimer),this.rollbackTimer=void 0),this.editor&&(this.bindHandlers(e),this.editor.initialized)){if(this.currentContent=null!==(t=this.currentContent)&&void 0!==t?t:this.editor.getContent(),"string"==typeof this.props.initialValue&&this.props.initialValue!==e.initialValue)this.editor.setContent(this.props.initialValue),this.editor.undoManager.clear(),this.editor.undoManager.add(),this.editor.setDirty(!1);else if("string"==typeof this.props.value&&this.props.value!==this.currentContent){var o=this.editor;o.undoManager.transact(function(){if(!n.inline||o.hasFocus())try{e=o.selection.getBookmark(3)}catch(e){}var e,t=n.valueCursor;if(o.setContent(n.props.value),!n.inline||o.hasFocus())for(var r=0,s=[e,t];r<s.length;r++){var a=s[r];if(a)try{o.selection.moveToBookmark(a),n.valueCursor=a;break}catch(e){}}})}if(this.props.disabled!==e.disabled){var s=null!==(r=this.props.disabled)&&void 0!==r&&r;A(this.editor,s?"readonly":"design")}}},t.prototype.componentDidMount=function(){var e,t,r,n,o,s=this;null!==_(this.view)?this.initialise():Array.isArray(this.props.tinymceScriptSrc)&&0===this.props.tinymceScriptSrc.length?null===(t=(e=this.props).onScriptsLoadError)||void 0===t||t.call(e,Error("No `tinymce` global is present but the `tinymceScriptSrc` prop was an empty array.")):(null===(r=this.elementRef.current)||void 0===r?void 0:r.ownerDocument)&&V.loadList(this.elementRef.current.ownerDocument,this.getScriptSources(),null!==(o=null===(n=this.props.scriptLoading)||void 0===n?void 0:n.delay)&&void 0!==o?o:0,function(){var e,t;null===(t=(e=s.props).onScriptsLoad)||void 0===t||t.call(e),s.initialise()},function(e){var t,r;null===(r=(t=s.props).onScriptsLoadError)||void 0===r||r.call(t,e)})},t.prototype.componentWillUnmount=function(){var e=this,t=this.editor;t&&(t.off(G,this.handleEditorChange),t.off(this.beforeInputEvent(),this.handleBeforeInput),t.off("keypress",this.handleEditorChangeSpecial),t.off("keydown",this.handleBeforeInputSpecial),t.off("NewBlock",this.handleEditorChange),Object.keys(this.boundHandlers).forEach(function(r){t.off(r,e.boundHandlers[r])}),this.boundHandlers={},t.remove(),this.editor=void 0)},t.prototype.render=function(){return this.inline?this.renderInline():this.renderIframe()},t.prototype.beforeInputEvent=function(){return window.InputEvent&&"function"==typeof InputEvent.prototype.getTargetRanges?"beforeinput SelectionChange":"SelectionChange"},t.prototype.renderInline=function(){var e=this.props.tagName;return o.createElement(void 0===e?"div":e,{ref:this.elementRef,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.renderIframe=function(){return o.createElement("textarea",{ref:this.elementRef,style:{visibility:"hidden"},name:this.props.textareaName,id:this.id,tabIndex:this.props.tabIndex})},t.prototype.getScriptSources=function(){var e,t,r=null===(e=this.props.scriptLoading)||void 0===e?void 0:e.async,n=null===(t=this.props.scriptLoading)||void 0===t?void 0:t.defer;if(void 0!==this.props.tinymceScriptSrc)return"string"==typeof this.props.tinymceScriptSrc?[{src:this.props.tinymceScriptSrc,async:r,defer:n}]:this.props.tinymceScriptSrc.map(function(e){return"string"==typeof e?{src:e,async:r,defer:n}:e});var o=this.props.cloudChannel,s=this.props.apiKey?this.props.apiKey:"no-api-key";return[{src:"https://cdn.tiny.cloud/1/".concat(s,"/tinymce/").concat(o,"/tinymce.min.js"),async:r,defer:n}]},t.prototype.getInitialValue=function(){return"string"==typeof this.props.initialValue?this.props.initialValue:"string"==typeof this.props.value?this.props.value:""},t.prototype.bindHandlers=function(e){var t=this;if(void 0!==this.editor){r=this.editor,n=this.props,o=this.boundHandlers,z(function(e){return t.props[e]},r.on.bind(r),r.off.bind(r),function(e,t){return function(n){var o;return null===(o=e(t))||void 0===o?void 0:o(n,r)}},e,n,o);var r,n,o,s=function(e){return void 0!==e.onEditorChange||void 0!==e.value},a=s(e),i=s(this.props);!a&&i?(this.editor.on(G,this.handleEditorChange),this.editor.on(this.beforeInputEvent(),this.handleBeforeInput),this.editor.on("keydown",this.handleBeforeInputSpecial),this.editor.on("keyup",this.handleEditorChangeSpecial),this.editor.on("NewBlock",this.handleEditorChange)):a&&!i&&(this.editor.off(G,this.handleEditorChange),this.editor.off(this.beforeInputEvent(),this.handleBeforeInput),this.editor.off("keydown",this.handleBeforeInputSpecial),this.editor.off("keyup",this.handleEditorChangeSpecial),this.editor.off("NewBlock",this.handleEditorChange))}},t.propTypes=S,t.defaultProps={cloudChannel:"7"},t}(o.Component);r(28795);let $=({value:e="<div></div>",loading:t,onChangeContent:r,handleFeedbackSubmit:s,eventType:a,highlightContent:i})=>{let l=(0,o.useRef)(null),c=(0,o.useRef)(null),[d,u]=(0,o.useState)(""),[p,h]=(0,o.useState)(!1),[f,m]=(0,o.useState)(""),[x,g]=(0,o.useState)({top:0,left:0}),v=(0,o.useRef)(null);return(0,o.useEffect)(()=>{if(l.current&&i){let e=l.current;e.dom.removeClass(e.dom.select("span.highlighted-content"),"highlighted-content"),i.trim()&&e.execCommand("SearchReplace",!1,{find:i,replace:`<span class="highlighted-content">${i}</span>`,all:!0,case_sensitive:!1,whole_words:!1})}},[i]),(0,o.useEffect)(()=>{let e=e=>{v.current&&!v.current.contains(e.target)&&h(!1)};return document.addEventListener("mousedown",e),()=>document.removeEventListener("mousedown",e)},[]),(0,n.jsx)("div",{className:"relative",children:t?(0,n.jsx)("p",{className:"mt-5 text-md text-black",children:"Content Loading..."}):(0,n.jsxs)(n.Fragment,{children:[(0,n.jsx)(W,{apiKey:"dungff8svz2oxszu46ko0tng5ic4pu5fap9ggle4pxfnag2r",value:e,onInit:(e,t)=>{l.current=t,i&&t.on("init",()=>{t.execCommand("SearchReplace",!1,{find:i,replace:`<span class="highlighted-content">${i}</span>`,all:!0})}),t.on("selectionchange",()=>{c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{let e=t.selection,r=e.getContent();if(r&&r.trim().length>0){let t=e.getRng().getBoundingClientRect();u(r),g({top:t.bottom+window.scrollY,left:t.left+window.scrollX}),h(!0)}else h(!1)},300)})},init:{height:"Blog Post"!=a?"86vh":"37vh",menubar:!0,plugins:["advlist autolink lists link image charmap print preview anchor","searchreplace visualblocks code fullscreen","insertdatetime media table paste code help wordcount","fontselect fontsizeselect"],toolbar:`${"Blog Post"!=a&&"image"} | formatselect | fontselect fontsizeselect | bold italic backcolor | 
                  alignleft aligncenter alignright alignjustify | 
                  bullist numlist outdent indent | undo redo | removeformat | help`,content_style:`
                body {
                  font-family: Arial, sans-serif;
                  font-size: 16px;
                  line-height: 1.6;
                  color: #333;
                }
                .highlighted-comment {
                  background-color: #fff9c4;
                  position: relative;
                }
                .highlighted-comment::after {
                  content: "💬";
                  font-size: 12px;
                  position: absolute;
                  right: -15px;
                  top: -8px;
                }
                .highlighted-content {
                  background-color: #d4edff;
                  padding: 0 2px;
                  border-radius: 3px;
                  box-shadow: 0 0 0 1px #b8daff;
                  animation: pulse 2s infinite;
                }
                @keyframes pulse {
                  0% { background-color: #d4edff; }
                  50% { background-color: #b8daff; }
                  100% { background-color: #d4edff; }
                }
              `,setup:e=>{e.on("init",()=>{i&&e.execCommand("SearchReplace",!1,{find:i,replace:`<span class="highlighted-content">${i}</span>`,all:!0})})}},onEditorChange:e=>{r?.(e)}}),p&&(0,n.jsxs)("div",{ref:v,className:"absolute z-50 bg-white p-4 rounded shadow-lg border border-gray-300",style:{top:`${x.top}px`,left:`${x.left}px`},children:[(0,n.jsx)("div",{className:"mb-2",children:(0,n.jsx)("p",{className:"text-sm text-gray-600",children:d})}),(0,n.jsx)("textarea",{className:"w-full p-2 border rounded mb-2 text-gray-600",placeholder:"Add your comment...",rows:3,onChange:e=>m(e.target.value)}),(0,n.jsxs)("div",{className:"flex justify-end space-x-2",children:[(0,n.jsx)("button",{onClick:()=>h(!1),className:"text-black px-3 py-1 text-sm bg-gray-200 rounded",children:"Cancel"}),(0,n.jsx)("button",{onClick:()=>{l.current&&d&&l.current.execCommand("mceInsertContent",!1,`<span class="highlighted-comment" data-comment="${f}">${d}</span>`),h(!1),s(d,f)},className:"px-3 py-1 text-sm bg-blue-500 text-white rounded",children:"Add Comment"})]})]})]})})},Z=async(e,t)=>{let r=await fetch(e,t);if(!r.ok)throw Error(`Failed to fetch: ${r.statusText}`);return r.json()},K=({versionHistory:e})=>(0,n.jsx)("div",{className:"overflow-y-auto h-full scrollbar-thin scrollbar-thumb-gray-300 scrollbar-track-transparent",children:e.length>0?(0,n.jsx)("div",{className:"space-y-3 pr-2",children:e.map((e,t)=>(0,n.jsxs)("div",{className:"relative group flex items-start gap-3 p-3 bg-white rounded-xl border border-gray-100 hover:border-purple-200 transition-all shadow-xs hover:shadow-sm",children:[(0,n.jsxs)("div",{className:"relative flex-shrink-0",children:[(0,n.jsx)("div",{className:"w-10 h-10 rounded-full bg-gradient-to-br from-purple-50 to-purple-100 flex items-center justify-center border border-purple-100",children:(0,n.jsx)("span",{className:"text-purple-600 font-medium text-lg",children:e?.updatedBy?.fullname?.[0]?.toUpperCase()||"U"})}),(0,n.jsxs)("div",{className:"absolute -bottom-1 -right-1 bg-gradient-to-r from-purple-600 to-purple-500 text-white text-[0.65rem] font-bold rounded-full w-5 h-5 flex items-center justify-center shadow-xs",children:["v",e.version]})]}),(0,n.jsxs)("div",{className:"flex-1 min-w-0 space-y-1",children:[(0,n.jsxs)("div",{className:"flex items-baseline justify-between",children:[(0,n.jsxs)("div",{className:"flex items-center gap-2",children:[(0,n.jsx)("h4",{className:"text-sm font-semibold text-gray-900 truncate",children:e?.updatedBy?.fullname||"Unknown User"}),0===t&&(0,n.jsx)("span",{className:"text-[0.65rem] px-1.5 py-0.5 rounded-full bg-green-100 text-green-800",children:"Current"})]}),(0,n.jsx)("span",{className:"text-xs text-gray-400 ml-2 whitespace-nowrap",children:(0,a.f)(e.createdAt)})]}),e?.changes?.comment&&(0,n.jsx)("p",{className:"mt-0.5 text-sm text-gray-600 group-hover:text-gray-800 line-clamp-2",children:e?.changes?.comment}),(0,n.jsxs)("div",{className:"mt-1.5 flex flex-wrap gap-1",children:[e.changes?.description&&(0,n.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[0.65rem] font-medium bg-blue-50 text-blue-700 border border-blue-100",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),"Content"]}),e.changes?.artwork&&(0,n.jsxs)("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-[0.65rem] font-medium bg-green-50 text-green-700 border border-green-100",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"mr-1 h-3 w-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Artwork"]})]})]}),(0,n.jsx)("button",{className:"absolute top-3 right-3 opacity-0 group-hover:opacity-100 transition-opacity text-gray-300 hover:text-purple-500",onClick:()=>console.log("View version",e.version),title:"View this version",children:(0,n.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]},t))}):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[(0,n.jsxs)("div",{className:"relative w-16 h-16 mb-4",children:[(0,n.jsx)("div",{className:"absolute inset-0 bg-purple-50 rounded-full blur-sm"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"relative z-10 h-16 w-16 text-purple-300",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})]}),(0,n.jsx)("h4",{className:"text-lg font-medium text-gray-500",children:"No versions yet"}),(0,n.jsx)("p",{className:"mt-1 text-sm text-gray-400 max-w-xs",children:"Your first edit will create version 1 automatically"})]})}),q=({feedback:e,loading:t})=>(0,n.jsxs)("div",{className:"flex flex-col h-full",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-100 flex justify-between items-center",children:[(0,n.jsx)("h3",{className:"text-xl font-bold text-gray-800",children:"Feedback & Revisions"}),(0,n.jsx)("button",{className:"p-2 rounded-full bg-blue-50 text-blue-600 hover:bg-blue-100 transition",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-3a1 1 0 00-.867.5 1 1 0 11-1.731-1A3 3 0 0113 8a3.001 3.001 0 01-2 2.83V11a1 1 0 11-2 0v-1a1 1 0 011-1 1 1 0 100-2zm0 8a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})})})]}),(0,n.jsx)("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:t?(0,n.jsx)("div",{className:"space-y-4",children:[void 0,void 0,void 0].map((e,t)=>(0,n.jsxs)("div",{className:"animate-pulse",children:[(0,n.jsx)("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),(0,n.jsx)("div",{className:"h-3 bg-gray-100 rounded w-1/2 mb-3"}),(0,n.jsx)("div",{className:"h-3 bg-gray-200 rounded w-full"}),(0,n.jsx)("div",{className:"h-3 bg-gray-200 rounded w-5/6 mt-1"})]},t))}):e.length>0?e.map(e=>(0,n.jsx)("div",{className:"p-3 rounded-lg hover:bg-gray-50 transition cursor-pointer border border-gray-100",children:(0,n.jsxs)("div",{className:"flex items-start gap-3",children:[(0,n.jsx)("div",{className:"flex-shrink-0",children:(0,n.jsx)("div",{className:"h-8 w-8 rounded-full bg-blue-100 flex items-center justify-center text-blue-600 font-medium",children:e.userId.fullname.charAt(0)})}),(0,n.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,n.jsxs)("div",{className:"flex items-center justify-between",children:[(0,n.jsx)("p",{className:"text-sm font-semibold text-gray-800 truncate",children:e.userId.fullname}),(0,n.jsx)("span",{className:"text-xs text-gray-400",children:(0,a.f)(e.createdAt)})]}),(0,n.jsx)("p",{className:"text-sm text-gray-600 mt-1 whitespace-pre-line",children:e.comment}),e?.attachments?.length>0&&(0,n.jsx)("div",{className:"mt-2 flex gap-2",children:e.attachments.map((e,t)=>(0,n.jsx)("div",{className:"p-1 border rounded text-xs text-gray-500 hover:bg-gray-50",children:e.name},t))}),(0,n.jsxs)("div",{className:"mt-2 flex gap-2 text-xs",children:[(0,n.jsx)("button",{className:"text-blue-500 hover:text-blue-700",children:"Reply"}),(0,n.jsx)("button",{className:"text-gray-500 hover:text-gray-700",children:"Resolve"})]})]})]})},e._id)):(0,n.jsxs)("div",{className:"flex flex-col items-center justify-center h-full text-center p-6",children:[(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 10h.01M12 10h.01M16 10h.01M9 16H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-5l-5 5v-5z"})}),(0,n.jsx)("h4",{className:"mt-2 text-sm font-medium text-gray-700",children:"No feedback yet"}),(0,n.jsx)("p",{className:"mt-1 text-xs text-gray-500",children:"Be the first to share your thoughts"}),(0,n.jsx)("button",{className:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 transition",children:"Add Feedback"})]})}),(0,n.jsx)("div",{className:"p-4 border-t border-gray-100",children:(0,n.jsxs)("div",{className:"relative",children:[(0,n.jsx)("input",{type:"text",placeholder:"Add your feedback...",className:"w-full p-3 pr-12 rounded-lg border border-gray-200 focus:ring-2 focus:ring-blue-500 focus:border-blue-500 outline-none transition"}),(0,n.jsx)("button",{className:"absolute right-3 top-3 text-blue-500 hover:text-blue-700",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-8.707l-3-3a1 1 0 00-1.414 1.414L10.586 9H7a1 1 0 100 2h3.586l-1.293 1.293a1 1 0 101.414 1.414l3-3a1 1 0 000-1.414z",clipRule:"evenodd"})})})]})})]});function J(){let e=(0,s.useSearchParams)(),[t,r]=(0,o.useState)(""),[a,i]=(0,o.useState)(!1),[l,c]=(0,o.useState)(!1),[d,u]=(0,o.useState)(""),[p,h]=(0,o.useState)(null),{data:f=[]}=(0,g.x)(),[y,j]=(0,o.useState)(!1),[N,k]=(0,o.useState)(),{mutate:C}=w(),S=e.get("eventId"),E=(0,o.useCallback)(async(e,t,n)=>{try{if(c(!0),!e?.artwork||null!=t||null!=n){let o=`/api/events/generateImage?id=${S}`,s={theme:e?.theme,audience:e?.audienceFocus,contentType:e?.type,aiPrompt:t,cloudinaryUrl:n},a=await Z(o,{method:"PUT",body:JSON.stringify(s)});console.log("asdsadsad",a),h(e=>({...e,artwork:a?.data?.result})),r(a?.data?.result)}}catch(e){console.error("Error fetching event details:",e)}finally{c(!1)}},[S,c,h,r]),I=(0,o.useCallback)(e=>{c(!0),C(e,{onSuccess:e=>{c(!1),console.log("event details:",e),h(r=>({...r,...e?.data,artwork:e?.data?.artwork||t?.data?.result})),r(e?.data?.artwork||t?.data?.result),E(e?.data,null,null)},onError:e=>{c(!1),console.error("Failed:",e.message)}})},[C,c,h,r,E,t?.data?.result]),L=async(e,t)=>{if(!S||!N)return;let r={eventId:S,changes:{...N,comment:t||"No comment provided"},versionAction:e};try{i(!0),await Z("/api/events/content",{method:"PUT",body:JSON.stringify(r)}),j(!1),I(S)}catch(e){console.error("Error saving changes:",e)}finally{i(!1)}},z=async()=>{k({description:d}),j(!0)},P=async(e,t)=>{if(S)try{i(!0),await Z("/api/events/feedback",{method:"POST",body:JSON.stringify({eventId:S,comment:t,text:e})}),I(S)}catch(e){console.error("Error submitting feedback:",e)}finally{i(!1)}},D=async()=>{if(!t){console.error("No file selected");return}let e=await fetch(t),r=await e.blob(),n=new File([r],"uploaded-image",{type:r.type}),o=new FormData;o.append("file",n),c(!0);try{let e=await fetch("/api/cloudinary/upload",{method:"POST",body:o}),t=await e.json();if(t.success)return E(p,null,t.url),t.url;console.error(t.error)}catch(e){console.error("Error uploading image:",e)}finally{c(!1)}};return p?(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsxs)("div",{className:"bg-white w-full",children:[(0,n.jsx)(x.A,{handleApproveChanges:z,editor:!0,contentType:p?.type,profile:f}),(0,n.jsx)(b,{isOpen:y,currentVersion:p?.version||1,onSave:L,onCancel:()=>j(!1)}),a&&(0,n.jsx)(v,{}),(0,n.jsxs)("div",{className:"flex w-full bg-white",children:[(0,n.jsxs)("div",{className:"w-[22%] bg-white border-r border-gray-100 flex flex-col",children:[(0,n.jsxs)("div",{className:"p-4 border-b border-gray-100 bg-gradient-to-b from-white to-gray-50",children:[(0,n.jsxs)("div",{className:"flex items-center gap-3",children:[(0,n.jsx)("div",{className:"p-2 rounded-lg bg-purple-50 text-purple-600",children:(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",viewBox:"0 0 20 20",fill:"currentColor",children:(0,n.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})})}),(0,n.jsxs)("div",{children:[(0,n.jsx)("h3",{className:"text-lg font-bold text-gray-900",children:"Version History"}),(0,n.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Track all document changes"})]})]}),(0,n.jsxs)("div",{className:"mt-3 relative",children:[(0,n.jsx)("input",{type:"text",placeholder:"Search versions...",className:"w-full pl-8 pr-3 py-1.5 text-sm border border-gray-200 rounded-lg focus:ring-1 focus:ring-purple-300 focus:border-purple-300"}),(0,n.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",className:"absolute left-2.5 top-2 h-3.5 w-3.5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:(0,n.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})]}),(0,n.jsx)("div",{className:"flex-1 overflow-hidden bg-[url('data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSI2IiBoZWlnaHQ9IjYiPgo8cmVjdCB3aWR0aD0iNiIgaGVpZ2h0PSI2IiBmaWxsPSIjZmZmIj48L3JlY3Q+CjxwYXRoIGQ9Ik0wIDBMNiA2IiBzdHJva2U9IiNlZGVkZWQiIHN0cm9rZS13aWR0aD0iMC41Ij48L3BhdGg+CjxwYXRoIGQ9Ik02IDBMMCA2IiBzdHJva2U9IiNlZGVkZWQiIHN0cm9rZS13aWR0aD0iMC41Ij48L3BhdGg+Cjwvc3ZnPg==')]",children:(0,n.jsx)(K,{versionHistory:p?.versionHistory||[]})}),(0,n.jsx)("div",{className:"p-3 border-t border-gray-100 bg-white text-center",children:(0,n.jsx)("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-purple-50 border border-purple-100",children:(0,n.jsxs)("span",{className:"text-xs font-medium text-purple-700",children:["Current: v",p?.version||1]})})})]}),(0,n.jsxs)("div",{className:"h-[86vh] flex-1 shadow-lg",children:[!a&&p?.type!="Blog Post"&&(0,n.jsx)(m,{generateImageLoading:l,setImageUrl:r,imageUrl:t,onGenerateAI:e=>E(p,e,null),onCloudinaryUpload:D}),(0,n.jsx)($,{loading:a,highlightContent:"In today's fast-paced digital landscape, small an",handleFeedbackSubmit:(e,t)=>P(e,t),onChangeContent:u,value:d,eventType:p?.type??""})]}),(0,n.jsx)("div",{className:"w-[24%] bg-white ml-3 rounded-xl overflow-hidden",children:(0,n.jsx)("div",{className:"h-[86vh] shadow-lg flex flex-col",children:(0,n.jsx)(q,{feedback:p?.feedback||[],loading:a})})})]})]})}):(0,n.jsx)("div",{children:"Loading event details..."})}function Q(){return(0,n.jsx)(o.Suspense,{fallback:(0,n.jsx)("div",{children:"Loading..."}),children:(0,n.jsx)(J,{})})}},54481:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(62740);function o({children:e}){return(0,n.jsx)("div",{className:"min-h-screen flex w-full bg-white",children:e})}r(76301)},75190:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>n});let n=(0,r(46760).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/eventDetails/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/apple/Desktop/sarfaraz/personal/orkyst/frontend/src/app/eventDetails/page.tsx","default")},28795:()=>{}};var t=require("../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),n=t.X(0,[638,657,902,739,288],()=>r(32560));module.exports=n})();